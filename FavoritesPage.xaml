<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="Bakalarka_Jelinek.FavoritesPage"
             Title="Oblíbené položky">

    <ScrollView>
        <VerticalStackLayout Padding="10" Spacing="12">

            <Label Text="Vaše oblíbené:"
                   FontSize="20"
                   FontAttributes="Bold" />

            
            <Picker x:Name="TypFilter"
                    Title="Filtruj podle typu"
                    SelectedIndexChanged="OnTypFilterChanged">
                <Picker.Items>
                    <x:String>Vše</x:String>
                    <x:String>pamatka</x:String>
                    <x:String>restaurace</x:String>
                    <x:String>obchod</x:String>
                    <x:String>bar</x:String>
                </Picker.Items>
            </Picker>

            <CollectionView x:Name="FavoritesList"
                            Margin="0,10"
                            HeightRequest="800">
                <CollectionView.ItemTemplate>
                    <DataTemplate>
                        <Border Stroke="LightGray"
                                StrokeThickness="1"
                                StrokeShape="RoundRectangle 12"
                                Padding="12"
                                Margin="0,6"
                                BackgroundColor="White"
                                Shadow="Small">

                            <Grid ColumnDefinitions="*,Auto"
                                  RowSpacing="6">
                                
                                <VerticalStackLayout Spacing="2" Grid.Column="0">
                                    <Label Text="{Binding Nazev}"
                                           FontAttributes="Bold"
                                           FontSize="18"
                                           TextColor="#222"/>
                                    <Label Text="{Binding Typ}"
                                           FontSize="13"
                                           TextColor="#888" />
                                    <Label Text="{Binding Adresa}"
                                           FontSize="13"
                                           TextColor="#666" />
                                    <Label Text="{Binding Lat, StringFormat='Lat: {0:F5}'}"
                                           FontSize="12"
                                           TextColor="Gray"/>
                                    <Label Text="{Binding Lon, StringFormat='Lon: {0:F5}'}"
                                           FontSize="12"
                                           TextColor="Gray"/>
                                </VerticalStackLayout>

                                
                                <VerticalStackLayout Grid.Column="1"
                                                     Spacing="8"
                                                     HorizontalOptions="End"
                                                     VerticalOptions="Start">
                                    <Button Text="Navigovat"
                                            FontSize="13"
                                            BackgroundColor="#6A0DAD"
                                            TextColor="White"
                                            WidthRequest="90"
                                            HeightRequest="36"
                                            CornerRadius="8"
                                            Padding="4"
                                            Clicked="OnNavigateClicked"/>

                                    <Button Text="{Binding FavoriteIcon}"
                                            FontSize="22"
                                            BackgroundColor="#6A0DAD"
                                            TextColor="White"
                                            WidthRequest="42"
                                            HeightRequest="42"
                                            CornerRadius="10"
                                            Padding="0"
                                            Clicked="OnFavoriteClicked"
                                            IsVisible="{Binding IsUserLoggedIn}" />
                                </VerticalStackLayout>

                            </Grid>
                        </Border>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>
        </VerticalStackLayout>
    </ScrollView>
</ContentPage>
